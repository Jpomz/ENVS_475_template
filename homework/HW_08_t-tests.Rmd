---
title: "ENVS475 Homework 08: t-tests"
subtitle: "Ungraded"
date: "Spring, 2023"
output: 
  html_document:
    toc: true
    toc_depth: 2
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
   warning = FALSE, message = FALSE,
   eval = FALSE,
   fig.align = 'center', fig.retina = 2,
  collapse = TRUE,
  comment = "#>"
)
library(dplyr)
# data1
bt_samp <- read.csv(here::here("data/body_temp_hr.csv"))

# data 2
finch <- read.csv(here::here("data/galapago-finches.csv"))
# filter out scandens data and make a tibble
scandens <- finch %>%
  filter(species == "scandens") %>%
  as_tibble()

# change the year column to a character data type
# this is necessary to run a 2-sample t-test
# If we leave year as an integer, the lm() function 
# will treat it as continuous and will calculate statistics for a linear regression. 
scandens$year <- as.character(scandens$year)

# data3
darwin_maize <- read.csv(here::here("data/darwin_maize.csv"))
```

# This assignment will not be graded.

# Assignment Format

* Open a new R script
* Save your R script in the `homework/` folder
* Name your script according to: `full_name_hw##.R`
  + For example: `justin_pomeranz_hw08.R`
* Comment before each problem, and each sub-problem
* Make sure your results print out on `Source with echo`
  + If you're answer is saved in an object, make sure you print out that object afterwards
  
# Setup

## Load packages

```{r, eval=FALSE}
# load libraries
library(dplyr)
library(ggplot2)
```

# Data

## Download the data and read into R


```{r, eval = FALSE}
# read in data
bt_samp <- read.csv("data/body_temp_hr.csv")
```


# Exercises Homework 08: t-tests

## Problem 1: One-sample t-test 
We will be formally testing whether the true population mean of human body temperatures is eaqual to 98.6 degrees Fahrenheit.  

1.1 Add a comment to your homework script stating the null and alternative hypotheses. Make sure to put each hypothesis on its own line. Make sure that your alternative hypothesis is 2-tailed.  
1.2 Extract the `body_temp` data from `bt_samp` and store it as a vector called `b`.  
1.3 Create new variables for the mean, SD and SEM of the vector `b`. Be sure that the values print out when you source your script so that I can check your work.  
1.4 Calculate a t-statistic and print it out to your console.  
  **HINT** Name it something different from the lab so that you don't get confused which variable is which.  
1.5 calculate the critical value of t for this analysis and store it as a variable.  
  + **HINT** use the `qt()` function, and make sure you calculate the correct degrees of freedom for this data set.  
  + Give it a different name than what was used in the lab.  
  
1.6 Add a comment interpreting how the t-stat compares to our t-critical value. Do we reject or fail to reject our null hypothesis?  
1.7 Calculate the p-value for your t-statistic in this analysis.  
1.8 Analyze your `b` vector using the `lm()` function. Make sure to correctly account for your null value of 98.6 degrees.  
  + Store your fitted model as an object, and then use the `summary()` function to print out the results  
  

## Problem 2: two-sample t-test  

### Data: `scandens` 

We will once again be using the *Geospiza scandens* data from the `darwin-finches.csv`. 

```{r, eval = FALSE}
# read in full data set
finch <- read.csv("data/galapago-finches.csv")
# filter out scandens data and make a tibble
scandens <- finch %>%
  filter(species == "scandens") %>%
  as_tibble()

# change the year column to a character data type
# this is necessary to run a 2-sample t-test
# If we leave year as an integer, the lm() function 
# will treat it as continuous and will calculate statistics for a linear regression. 
scandens$year <- as.character(scandens$year)
```

1.1 Add a comment to your homework script stating the null and alternative hypotheses. Make sure to put each hypothesis on its own line. Make sure that your alternative hypothesis is 2-tailed.  

1.2 Use `dplyr`, `group_by()`, `summarize()` and `mutate()` to calculate the following statistics for each `year`: 
  + Average, Standard Deviation, $\sqrt(n)$, and the Standard Error of the Mean.  

1.3 Use the `lm()` function to perform a 2-sample t-test on whether or not the average `blength` (in mm) is equal between the two years of data.  
  + Note that you will be using the `scandens` data for this step, not the summarized data you calculated in 1.2 above.  
  + Make sure to save your model-fit as an object, and then use the `summary()` function to print out the results.  
  
1.4 Add a comment to your script interpreting the results of your analysis.  

## Problem 3: paired t-test


### Data: `darwin_maize`  

For this problem, we will be using the `darwin_maize.csv` available on D2L. Download this csv file into your `data/` folder and read it into R. 

```{r, eval = FALSE}
darwin_maize <- read.csv("data/darwin_maize.csv")
```

3.1 Add a comment to your homework script stating the null and alternative hypotheses. Make sure to put each hypothesis on its own line. Make sure that your alternative hypothesis is 2-tailed.   

3.2. Make a new data object called `darwin_diff` which includes the `difference` in `heights` for each `pair` in the data set. 
  + As in the lab, the way the data is structured does not make this task simple, but we can use `group_by()` function before using the `-diff()` function inside of `mutate()` to accomplish this.  
  + See the `caterpillar` example from the lab.  
  + **Hint** your new object should contain the following columns: `pair` and `difference`.  
  + Make sure to print out your new `darwin_diff` object at the end of this problem.  
  
3.3 Use `lm()` function to formally test your hypothesis.  
  + Store the output of `lm()` in a new data object, and then use the `summary()` function to print out the results.  
  
3.4 Add a comment to your script interpreting the results of your analysis.
